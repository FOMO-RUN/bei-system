# 中文化约束文档

> 记录悖系统中文化的边界、决策和最佳实践。

---

## 1. Rust 硬性限制（无法绕过）

### 关键字

以下 Rust 关键字**必须使用英文**，无法通过任何方式中文化：

```rust
// 控制流
if, else, match, loop, while, for, break, continue, return

// 定义
fn, let, const, static, struct, enum, trait, impl, type, mod, use

// 可见性
pub, crate, self, super

// 异步
async, await

// 其他
where, as, in, ref, mut, move, dyn, unsafe, extern
```

### Crate 名称

`crates.io` 强制要求包名使用 ASCII 字符。因此：

| 实际名称 | 中文含义 |
|----------|----------|
| `bei_core` | 悖核心 |
| `bei_macro` | 悖中文宏 |
| `bei_orchestrator` | 悖编排器 |
| `bei_replay` | 悖回放 |
| `bei_skill` | 悖技能 |
| `bei_cli` | 悖命令行 |

### Cargo.toml 字段

TOML 规范要求字段名为 ASCII：

```toml
[package]           # 不能改成 [包]
name = "bei_core"   # 不能改成 名称 = "悖核心"
version = "0.1.0"   # 不能改成 版本 = "0.1.0"
```

---

## 2. 可中文化但需宏/Trait 封装

### 标准库方法（通过 bei_macro 中文化）

| 原英文 | 中文封装 | 方式 |
|--------|----------|------|
| `println!` | `换行打印!` | 宏 |
| `print!` | `打印!` | 宏 |
| `format!` | `格式化!` | 宏 |
| `vec!` | `向量!` | 宏 |
| `assert!` | `断言!` | 宏 |
| `Some(x)` | `有!(x)` | 宏 |
| `None` | `无()` | 函数 |
| `Ok(x)` | `成!(x)` | 宏 |
| `Err(x)` | `败!(x)` | 宏 |

### Trait 扩展方法

| 类型 | 原方法 | 中文方法 |
|------|--------|----------|
| Option | `.unwrap()` | `.解包()` |
| Option | `.expect()` | `.期望()` |
| Option | `.unwrap_or()` | `.或者()` |
| Option | `.is_some()` | `.是有值()` |
| Option | `.is_none()` | `.是无值()` |
| Result | `.unwrap()` | `.解包()` |
| Result | `.is_ok()` | `.是成功()` |
| Result | `.is_err()` | `.是失败()` |
| Iterator | `.map()` | `.映射()` |
| Iterator | `.filter()` | `.过滤()` |
| Iterator | `.collect()` | `.收集()` |
| Iterator | `.for_each()` | `.遍历()` |
| String | `.len()` | `.长度()` |
| String | `.is_empty()` | `.是空()` |
| String | `.contains()` | `.包含()` |
| String | `.trim()` | `.去空白()` |
| Vec | `.push()` | `.推入()` |
| Vec | `.pop()` | `.弹出()` |

---

## 3. 文件命名规范

### 中文文件名

Rust 通过 `#[path]` 属性支持中文文件名：

```rust
// lib.rs
#[path = "目标.rs"]
pub mod muqiao;  // 模块标识符必须 ASCII

pub use muqiao::目标;  // 重导出时使用中文名
```

### 目录结构

```
crates/
├── bei_core/
│   └── src/
│       ├── lib.rs
│       ├── 目标.rs      ✅ 中文文件名
│       ├── 交付物.rs    ✅ 中文文件名
│       ├── 证据.rs      ✅ 中文文件名
│       └── 错误.rs      ✅ 中文文件名
```

---

## 4. 代码风格指南

### 推荐

```rust
// ✅ 使用中文标识符
struct 用户 {
    姓名: String,
    年龄: u32,
}

impl 用户 {
    fn 新建(姓名: impl Into<String>) -> Self {
        Self {
            姓名: 姓名.into(),
            年龄: 0,
        }
    }
}
```

### 使用 bei_macro

```rust
use bei_macro::*;

fn main() {
    let 列表 = 向量![1, 2, 3];
    
    let 结果: Vec<_> = 列表.iter()
        .映射(|x| x * 2)
        .过滤(|x| *x > 2)
        .收集();
    
    换行打印!("结果: {:?}", 结果);
}
```

---

## 5. 检查清单

新增代码时，请确认：

- [ ] 结构体/枚举名使用中文
- [ ] 函数/方法名使用中文
- [ ] 字段名使用中文
- [ ] 变量名使用中文
- [ ] 尽量使用 `bei_macro` 提供的中文宏和方法
- [ ] 注释使用中文
- [ ] 错误信息使用中文

---

## 变更记录

| 日期 | 变更 | 作者 |
|------|------|------|
| 2026-01-30 | 创建中文化约束文档 | Antigravity |
